<!doctype html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="http://openlayers.org/en/v3.0.0/css/ol.css" type="text/css">
        <style>
            .map {
                height: 400px;
                width: 100%;
            }
        </style>
        <script src="http://openlayers.org/en/v3.0.0/build/ol.js" type="text/javascript"></script>
        <title>OpenLayers 3 example</title>
    </head>
    <body>
        <h2>My Map</h2>
        <div id="map" class="map"></div>

        <script type="text/javascript">

            var view = new ol.View({
                center: [0, 0],
                zoom: 2
            });

            var map = new ol.Map({
                layers: [
                    new ol.layer.Tile({
                        source: new ol.source.OSM()
                    })
                ],
                target: 'map',
                controls: ol.control.defaults({
                    attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
                        collapsible: false
                    })
                }),
                view: view
            });

            var geolocation = new ol.Geolocation({
                projection: view.getProjection(),
                tracking: true
            });
            geolocation.once('change:position', function() {
                view.setCenter(geolocation.getPosition());
                view.setResolution(3);
            });
            
            // handle geolocation error.
            geolocation.on('error', function(error) {
                var info = document.getElementById('info');
                info.innerHTML = error.message;
                info.style.display = '';
            });

            var positionFeature = new ol.Feature();
            positionFeature.bindTo('geometry', geolocation, 'position')
                    .transform(function() {
            }, function(coordinates) {
                return coordinates ? new ol.geom.Point(coordinates) : null;
            });

            var featuresOverlay = new ol.FeatureOverlay({
                map: map,
                features: [positionFeature]
            });

        </script>
    </body>
</html>