{# Template for viewing one publishing root entity subclass #}
<div class="row publishing">
    <a id="anchor-{{ content.id }}"></a>
    <div class="large-2 medium-3 small-4 columns">
        {% include 'TrismegisteSocialBundle:Netizen:avatar_popup.html.twig' with {author: content.author } %}
    </div>
    <div class="large-10 medium-9 columns">
        {% set dropdown_id = 'drop' ~ content.id %}
        <a href="#" class="right" data-options="align:left" data-dropdown="{{ dropdown_id }}"><i class="fi-widget"></i></a>
        <ul id="{{ dropdown_id }}" class="f-dropdown" data-dropdown-content>
            {% if is_granted('OWNER', content) %}
            <li><a href="{{ path('publishing_edit', {id: content.id}) }}">Edit</a></li>
            <li><a href="{{ path('publishing_delete', {id: content.id}) }}">Delete</a></li>
            {% endif %}
            <li><a href="{{ path('pub_abusivereport', {action: 'add', wallNick: wallNick, wallFilter: wallFilter, id: content.id}) }}">Report abuse or spam</a></li>
        </ul>
        <h6 class="subheader">{{ content.author.nickname }} <small>{{ content.lastEdited | timeago }}</small></h6>
        {% block content_properties %}{% endblock %}

        <div>
        <a href="{{ path('pub_commentary_add', {wallNick: wallNick, wallFilter: wallFilter, id: content.id}) }}" class="button tiny secondary">Reply</a>
        <a href="#" class="button tiny secondary">Repost</a>
        {% include 'TrismegisteSocialBundle:Content:publishing_like_button.html.twig' %}
        <a href="#" class="button tiny secondary">Permalink</a>
        </div>

        {% block commentary_create %}{% endblock %}
        {% set commIt = content.commentaryIterator %}
        {% if commIt.count > 0 %}
            <h6>{{ commIt.count }} Comments</h6>
            {% for comment in commIt %}
                {% include 'TrismegisteSocialBundle:Content:commentary_show.html.twig' %}
            {% endfor %}
        {% endif %}
    </div>
</div>
