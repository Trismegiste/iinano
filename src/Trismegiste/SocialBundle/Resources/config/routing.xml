<?xml version="1.0" encoding="UTF-8" ?>

<routes xmlns="http://symfony.com/schema/routing"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd">

    <route id="content_index" pattern="/">
        <default key="_controller">TrismegisteSocialBundle:Content:index</default>
        <requirement key="_method">GET</requirement>
    </route>
    <route id="ajax_content_more" pattern="/content_more/{offset}">
        <default key="_controller">TrismegisteSocialBundle:Content:ajaxMore</default>
        <requirement key="_method">GET</requirement>
        <requirement key="offset">[\d]+</requirement>        
    </route>
    <route id="wall_index" pattern="/wall/{wallNick}/{wallFilter}">
        <default key="_controller">TrismegisteSocialBundle:Content:wall</default>
        <requirement key="_method">GET</requirement>
        <requirement key="wallNick">%nickname_regex%</requirement>
        <requirement key="wallFilter">(self|follower|following|friend|all)</requirement>
    </route>

    <route id="simplepost_create" pattern="/simplepost/create">
        <default key="_controller">TrismegisteSocialBundle:SimplePost:create</default>
    </route>
    <route id="simplepost_edit" pattern="/simplepost/{id}/edit">
        <default key="_controller">TrismegisteSocialBundle:SimplePost:edit</default>
        <requirement key="id">[\da-f]{24}</requirement>        
    </route>
    <route id="simplepost_delete" pattern="/simplepost/{id}/delete">
        <default key="_controller">TrismegisteSocialBundle:SimplePost:delete</default>
        <requirement key="id">[\da-f]{24}</requirement>        
    </route>
    
    <route id="guest_about" pattern="/guest/about">
        <default key="_controller">TrismegisteSocialBundle:Guest:about</default>
        <requirement key="_method">GET</requirement>
    </route>
    <route id="guest_register" pattern="/guest/register">
        <default key="_controller">TrismegisteSocialBundle:Guest:register</default>
    </route>
    
    <route id="pub_commentary_add" pattern="/pub/{id}/commentary/add">
        <default key="_controller">TrismegisteSocialBundle:Commentary:addOnPublishing</default>
        <requirement key="id">[\da-f]{24}</requirement>
    </route>
    <route id="pub_commentary_edit" pattern="/pub/{id}/commentary/{uuid}/edit">
        <default key="_controller">TrismegisteSocialBundle:Commentary:editOnPublishing</default>
        <requirement key="id">[\da-f]{24}</requirement>
        <requirement key="uuid">[\da-f]{40}</requirement>
    </route>
    <route id="pub_commentary_delete" pattern="/pub/{id}/commentary/{uuid}/delete">
        <default key="_controller">TrismegisteSocialBundle:Commentary:deleteOnPublishing</default>
        <requirement key="id">[\da-f]{24}</requirement>
        <requirement key="uuid">[\da-f]{40}</requirement>
    </route>

    <route id="commentary_famous" pattern="/pub/{id}/commentary/{uuid}/famous/{action}">
        <default key="_controller">TrismegisteSocialBundle:Famous:likeCommentary</default>
        <requirement key="id">[\da-f]{24}</requirement>
        <requirement key="uuid">[\da-f]{40}</requirement>
        <requirement key="action">(add|remove)</requirement>
    </route>
    
    <route id="netizen_show" pattern="/profile/{author}">
        <default key="_controller">TrismegisteSocialBundle:Netizen:showProfile</default>
        <requirement key="author">%nickname_regex%</requirement>
    </route>
    <route id="netizen_avatar" pattern="/avatar/{filename}">
        <default key="_controller">TrismegisteSocialBundle:Netizen:sendAvatar</default>
        <requirement key="filename">[\da-f]+\.jpg</requirement>
    </route>        
    <route id="netizen_famous" pattern="/user/{id}/like/{action}">
        <default key="_controller">TrismegisteSocialBundle:Netizen:likeNetizen</default>
        <requirement key="id">[\da-f]{24}</requirement>
        <requirement key="action">(add|remove)</requirement>
    </route>
    <route id="netizen_follow" pattern="/user/{id}/follow/{action}">
        <default key="_controller">TrismegisteSocialBundle:Netizen:followNetizen</default>
        <requirement key="id">[\da-f]{24}</requirement>
        <requirement key="action">(add|remove)</requirement>
    </route>
    
    <import resource="@TrismegisteSocialBundle/Resources/config/wall.xml" 
            prefix="/wall/{wallNick}/{wallFilter}">
        <requirement key="wallNick">%nickname_regex%</requirement>
        <requirement key="wallFilter">(self|follower|following|friend|all)</requirement>
    </import>
</routes>
